@admin
Feature: 관리자 경기 관리

  Background:
    Given 경기장은 내야와 외야 영역으로 나뉘며, 내야 영역은 연고와 원정 진영으로, 외야 영역은 좌측과 우측 진영으로 구분되고, 각 진영은 2개의 구간과 구간별 100개의 좌석으로 구성됩니다.

  Scenario: 관리자가 새 경기를 생성한다.
    Given 관리자가 로그인하고,
    When 관리자가 장소 '잠실 야구장', 연고 'LG 트윈스', 원정 '두산 베어스', 일시 '2026-05-01T18:30:00'로 경기를 생성하면,
    Then 경기 생성에 성공한다.
    And 생성된 경기의 상태는 'DRAFT'이다.

  Scenario: 관리자가 경기 정보를 수정한다.
    Given 관리자가 로그인하고,
    And 관리자가 장소 '잠실 야구장', 연고 'LG 트윈스', 원정 '두산 베어스', 일시 '2026-05-01T18:30:00'로 경기를 생성하면,
    When 관리자가 해당 경기의 장소를 '고척 스카이돔'으로 수정하면,
    Then 경기 수정에 성공한다.
    And 수정된 경기의 장소는 '고척 스카이돔'이다.

  Scenario: 관리자가 경기를 삭제한다.
    Given 관리자가 로그인하고,
    And 관리자가 장소 '잠실 야구장', 연고 'LG 트윈스', 원정 '두산 베어스', 일시 '2026-05-01T18:30:00'로 경기를 생성하면,
    When 관리자가 해당 경기를 삭제하면,
    Then 경기 삭제에 성공한다.

  Scenario: 관리자가 경기를 오픈한다.
    Given 관리자가 로그인하고,
    And 관리자가 장소 '잠실 야구장', 연고 'LG 트윈스', 원정 '두산 베어스', 일시 '2026-05-01T18:30:00'로 경기를 생성하면,
    When 관리자가 해당 경기를 오픈하면,
    Then 경기 오픈에 성공한다.
    And 오픈된 경기의 상태는 'OPEN'이다.

  Scenario: 이미 오픈된 경기를 다시 오픈하면 실패한다.
    Given 관리자가 로그인하고,
    And 관리자가 장소 '잠실 야구장', 연고 'LG 트윈스', 원정 '두산 베어스', 일시 '2026-05-01T18:30:00'로 경기를 생성하면,
    And 관리자가 해당 경기를 오픈하면,
    When 관리자가 해당 경기를 다시 오픈하면,
    Then 경기 오픈에 실패한다.

  Scenario: 일반 사용자는 경기를 생성할 수 없다.
    Given 일반 사용자가 이메일 'user@email.com'로 로그인하고,
    When 일반 사용자가 장소 '잠실 야구장', 연고 'LG 트윈스', 원정 '두산 베어스', 일시 '2026-05-01T18:30:00'로 경기를 생성하면,
    Then 권한 오류가 발생한다.

  Scenario: 오픈된 경기만 좌석 선점이 가능하다.
    Given 관리자가 로그인하고,
    And 관리자가 장소 '잠실 야구장', 연고 'LG 트윈스', 원정 '두산 베어스', 일시 '2026-05-01T18:30:00'로 경기를 생성하면,
    And 일반 사용자가 이메일 'customer@email.com'로 로그인하고,
    When DRAFT 경기의 '내야-연고-1' 구역 1행 1열 좌석 점유를 요청하면,
    Then 경기 미오픈 오류가 발생한다.
